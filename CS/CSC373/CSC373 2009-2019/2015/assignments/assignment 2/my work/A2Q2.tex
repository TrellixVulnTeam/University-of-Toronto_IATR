\documentclass[11pt]{article}
\usepackage{fullpage}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{clrscode3e}

\setlength{\parskip}{2ex}
\newcommand{\qedsymb}{\hfill{\rule{2mm}{2mm}}}
\newenvironment{proof}{\vspace{-1mm}\begin{trivlist}
}{\qedsymb\end{trivlist}\vspace{-1mm}}

\begin{document}
\begin{center}
{\bf \Large \bf CSC373 Winter 2015 Assignment \# 2}\\
Name: Weidong An\\
Student Number: 1000385095
\end{center}
{\bf Question 2}\\
{\bf Proof}: To prove that \const{GoldDigger} is $NP$-complete, we need to show, 
\begin{enumerate}
\item \const{GoldDigger} $\in NP$
\item \const{GoldDigger} is $NP$-hard.
\end{enumerate}
\begin{enumerate}
\item[(1)] Show that \const{GoldDigger} $\in NP$.\\
Consider the verifier algorithm. The certificates are all the paths $C = [j_1, ..., j_\ell]$ for $\ell \leq m$.
\begin{codebox}
    \Procname{$\proc{GoldDiggerVerify}(h, g, H, G, C)$}
    \zi $hardness \gets 0$
    \zi $gold \gets 0$
    \zi \For $k \gets 1, ..., \ell$
    \zi     \Then \If {\bf not} $1 \leq j_k \leq n$
    \zi            \Then \Return \const{false} \End
    \zi           \If $k \geq 2$ {\bf and} {\bf not} $j_{k-1} - 1 \leq j_k \leq j_{k-1} +1$
    \zi                \Then \Return \const{false}\End
    \zi      $hardness \gets hardness + H[k, j_k]$
    \zi      $gold \gets gold + G[k, j_k]$\End
    \zi \If $hardness > h$ {\bf or} $gold < g$
    \zi      \Then \Return \const{false}\End
    \zi \Return \const{true}
\end{codebox}
$\proc{GoldDiggerVerify}(h, g, H, G, C)$ returns \const{true} for some $C$ if and only if there is a desired drill path.\\
This algorithm runs in worst case polynomial time because the for loop iterates at most $m$ times and it takes at most polynomial time to implement each iteration. Every line not in the for loop runs in polynomial time clearly.\\
Hence, \const{GoldDigger} $\in NP$.

\item[(2)] Show that \const{GoldDigger} is $NP$-hard.\\
Claim: \const{SubsetSum} $\leq_p$ \const{GoldDigger}.\\
\\
The definition of \const{SubsetSum} decision problem:\\
Input: A finite set of positive integers $S$ and a positive
    integer target $t$.\\
Output:    Is there some subset $S'$ of $S$ whose sum is exactly $t$?\\
\\
Consider the reduction function taking the input of \const{SubsetSum} to the input of \const{GoldDigger}:
\begin{codebox}
\Procname{$\proc{SubsetSumToGoldDigger}(S, t)$}
\zi Let $H$ and $G$ be $[|S|\times 2]$ arrays
\zi $i \gets 1$
\zi \For each $k\in S$
\zi      \Then $H[i, 1] \gets k$
\zi            $G[i, 1] \gets k$
\zi            $H[i, 2] \gets 0$
\zi            $G[i, 2] \gets 0$
\zi            $i \gets i + 1$\End
\zi $h \gets t$
\zi $g \gets t$
\zi \Return $(h, g, H, G)$
\end{codebox}
   \begin{figure}[h]
    \centering
        \begin{tabular}{|c|c|}
        \hline
            $s_1, s_1$  & 0,0  \\
        \hline
            $s_2, s_2$  & 0,0  \\
        \hline
            \vdots  & \vdots  \\
        \hline
            $s_n, s_n$  & 0,0  \\
        \hline
        \end{tabular}
    \caption{On input $S = \{s_1, s_2, ..., s_n\}$, output $H$ and $G$ as above.}\label{fig:example}
    \end{figure}
{\bf Runtime}: The reduction function runs in worst case $O(n)$ ($n = |S|$) which is in polynomial time.\\
{\bf Correctness}\\
Let $S = \{s_1, s_2, ..., s_n\}$.\\
Suppose there is a subset $S'$ of $S$ whose sum is exactly $t$. Define
\[
j_k=
\begin{cases}
1, & s_k \in S'\\
2, & s_k \notin S'
\end{cases}
\] for $k\in \{1, 2, ..., n\}$.
Then $j_1, j_2, ..., j_n$ is a path such that
\begin{itemize}
        \item
            $1 \le j_k \le 2$ for $k = 1,2,\dots,n$
            (each coordinate on the path is valid);
        \item
            $j_{k-1} - 1 \le j_k \le j_{k-1} + 1$ for $k = 2,\dots,n$
            (each block is underneath the one just above,
            either directly or diagonally) since there are only two columns in both $H$ and $G$;
        \item
            $H[1,j_1] + H[2,j_2] + \dots + H[n,j_n] = \sum\limits_{i\in S'}i = t \leq h = t$

        \item
            $G[1,j_1] + G[2,j_2] + \dots + G[n,j_n] = \sum\limits_{i\in S'}i = t \geq g = t$
        \end{itemize}
Hence, $j_1, j_2, ..., j_n$ is a desired drill path for input $(h, g, H, G)$. \\

In the other direction, suppose there is a drill path $j_1, j_2, ..., j_\ell$ for $\ell \leq n$.
Since there are only two columns in both $H$ and $G$, either $j_k = 1$ or $j_k=2$ for $k=1, \dots, \ell$. Construct $S'$ as follows:
\begin{codebox}
\zi $S' \gets \emptyset$
\zi \For $i \gets 1, \dots, \ell$
\zi     \Then \If $j_i \isequal 1$
\zi           \Then $S' \gets S'\cup \{s_i\}$
\end{codebox}
Note that $\sum\limits_{i\in S'}i = G[1,j_1] + G[2,j_2] + \dots + G[\ell,j_\ell] = H[1,j_1] + H[2,j_2] + \dots + H[\ell,j_\ell]$.\\
Also, $t =g\leq G[1,j_1] + G[2,j_2] + \dots + G[\ell,j_\ell] = H[1,j_1] + H[2,j_2] + \dots + H[\ell,j_\ell]\leq h=t$.
Then, $\sum\limits_{i\in S'}i=t$.\\
Then, $S'$ is a subset of $S$ whose sum is exactly t.\\
\\
Hence, \const{SubsetSum} $\leq_p$ \const{GoldDigger}.\\
It is proved that \const{SubsetSum} is $NP$-hard, so \const{GoldDigger} is $NP$-hard.\\
\\
By (1) and (2), \const{GoldDigger} $\in NP$ and \const{GoldDigger} is $NP$-hard. \\Hence, \const{GoldDigger} is $NP$-complete. $\blacksquare$





\end{enumerate}


\end{document}
